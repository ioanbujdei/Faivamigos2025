<!DOCTYPE html>
<html>
<head>
    <title>Custom Social Media Template</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Link to the CSS file -->
    <link rel="stylesheet" type="text/css" href="../static/index.css">
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>

    <!-- Leaflet JavaScript -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

</head>
<body>
<!-- Blue Bar at the Top -->
<div class="top-bar">
    <span class="top-bar-text">UrbanVoiceTM</span>
</div>

<div class="container">
  <!-- Left Column: Fixed Menu -->
  <div class="left-column">
    <!-- Logo -->
    <div class="logo">
      <img src="../static/logo.png" alt="Logo">
    </div>
    <!-- Menu -->
    <div class="menu">
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="notifications.html">Notifications</a></li>
        <li><a href="bookmarks.html">Bookmarks</a></li>
        <li><a href="javascript:void(0)" onclick="openProfileModal()">Profile</a></li>
        <li><button id="loginBtn" class="login-btn">Login</button></li> <!-- Add Login Button -->
      </ul>
    </div>
  </div>
  
  <!-- Middle Column: Posts -->
  <div class="middle-column">
    <!-- Post 1 -->
    <div class="card post" data-post-id="1">
        <span class="post-username">@jane_doe</span> <!-- Add username here -->
        <h4>Parcul Lunei.</h4>
        <img src="https://media.discordapp.net/attachments/1350152621536575593/1350800805409853460/Parc_Lunei-2.png?ex=67d80ec8&is=67d6bd48&hm=f030ab95ff095e1184a04ccf251322590106971377842afee7516ca1fa25ca73&=&format=webp&quality=lossless&width=1240&height=930" alt="Logo" onclick="goToAboutPage(this.src)">
        <p>Asfaltarea parcului in zona in care se afla pietris.</p>
        <div class="vote-buttons">
            <button class="upvote-btn">â¬†</button>
            <span class="vote-count">345</span>
            <button class="downvote-btn">â¬‡</button>
        </div>
    </div>

    <!-- Post 2 -->
    <div class="card post" data-post-id="2">
        <span class="post-username">@john_smith</span> <!-- Add username here -->
        <h4>Parcul Regina Maria.</h4>
        <img src="https://cdn.discordapp.com/attachments/1350152621536575593/1350800927195402362/b4bf5f21-4974-4948-8343-f10f1957ce51.png?ex=67d80ee5&is=67d6bd65&hm=870dee03c5395ccd517234718c433ef2547c62f171d6f26f6fdc3b79ea884323&" alt="Logo" onclick="goToAboutPage(this.src)">
        <p>In parc se afla prea putine banci. ðŸŒ†</p>
        <div class="vote-buttons">
            <button class="upvote-btn">â¬†</button>
            <span class="vote-count">-14</span>
            <button class="downvote-btn">â¬‡</button>
        </div>
    </div>

    <!-- Post 3 -->
    <div class="card post" data-post-id="3">
        <h4>Parcul Botanic.</h4>
        <img src="https://cdn.discordapp.com/attachments/1350152621536575593/1350801066320724070/index.png?ex=67d80f06&is=67d6bd86&hm=1a987d5b569ba2b5b4ea1f01fb1326f7c45fd7702b66dfd90de7abb029329b69&" alt="Logo" onclick="goToAboutPage(this.src)">
        <p>Dorim pista de biciclisti!! ðŸŒ…</p>
        <div class="vote-buttons">
            <button class="upvote-btn">â¬†</button>
            <span class="vote-count">80</span>
            <button class="downvote-btn">â¬‡</button>
        </div>
    </div>

    <!-- Post 4 -->
    <div class="card post" data-post-id="4">
        <h4>Strada Iuliu Maniu</h4>
        <img src="https://cdn.discordapp.com/attachments/1350152621536575593/1350801428385366027/strada-Aries-2.png?ex=67d80f5d&is=67d6bddd&hm=3d0686070c60a436936b12f3d7b7e12c5cb7ebe1878013d15a96dd3c5af9fa57&" alt="Logo" onclick="goToAboutPage(this.src)">
        <p>Avem nevoie de trecere pentru pietnoi! </p>
        <div class="vote-buttons">
            <button class="upvote-btn">â¬†</button>
            <span class="vote-count">45</span>
            <button class="downvote-btn">â¬‡</button>
        </div>
    </div>

    <!-- Post 5 -->
    <div class="card post" data-post-id="5">
        <h4>Strada Victoriei.</h4>
        <img src="https://cdn.discordapp.com/attachments/1350152621536575593/1350802561778581545/image-2013-02-3-14146303-41-bulevardul-vasile-milea-intre-timisoara-drumul-taberei.png?ex=67d8106b&is=67d6beeb&hm=81cf3339149e10c4d1055053b32d2c6bb4b0f47837e7f4136a44f93d9871e2ac&" alt="Logo" onclick="goToAboutPage(this.src)">
        <p>Pe sosea este o groapa mult prea mare. Trebuie reparata!!!</p>
        <div class="vote-buttons">
            <button class="upvote-btn">â¬†</button>
            <span class="vote-count">32</span>
            <button class="downvote-btn">â¬‡</button>
        </div>
    </div>
</div>
  
  
  
  <!-- Right Column: Sorting and Events -->
<div class="right-column">
  <div class="card">
      <h3>Sort By</h3>
      <!-- Dropdown for sorting options -->
      <select id="sortOptions" class="sort-dropdown">
          <option value="new">New</option>
          <option value="popular">Popular</option>
          <option value="forYou">For You</option>
          <option value="date">Date</option>
      </select>
  </div>

  <div id="map" style="height: 400px; border-radius: 10px; margin-top: 20px;"></div>

</div>

<!-- Login Modal -->
<div id="loginModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeLoginModal()">&times;</span>
    <h2>Login</h2>
    <form id="loginForm">
      <label for="username">Username</label>
      <input type="text" id="username" placeholder="Enter username" required>

      <label for="password">Password</label>
      <input type="password" id="password" placeholder="Enter password" required>

      <button type="submit">Login</button>
    </form>
    <!-- Feedback message for login validation -->
    <div id="loginFeedback" style="margin-top: 10px; color: red;"></div>
    <p>No account? <a href="javascript:void(0)" onclick="openRegistrationModal()">Register here</a></p>
  </div>
</div>

<!-- Registration Modal -->
<div id="registrationModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeRegistrationModal()">&times;</span>
    <h2>Register</h2>
    <form id="registrationForm">
      <label for="regUsername">Username</label>
      <input type="text" id="regUsername" placeholder="Enter username" required>

      <label for="regEmail">Email</label>
      <input type="email" id="regEmail" placeholder="Enter email" required>

      <label for="regPassword">Password</label>
      <input type="password" id="regPassword" placeholder="Enter password" required>

      <label for="regConfirmPassword">Confirm Password</label>
      <input type="password" id="regConfirmPassword" placeholder="Confirm password" required>

      <button type="submit">Register</button>
    </form>
    <!-- Feedback message for validation -->
    <div id="registrationFeedback" style="margin-top: 10px; color: red;"></div>
  </div>
</div>

<!-- Profile Modal -->
<div id="profileModal" class="modal" style="display: none;">
  <div class="modal-content">
    <span class="close" onclick="closeProfileModal()">&times;</span>
    <h2>Profile</h2>
    <div class="profile-info">
      <p><strong>Username:</strong> JaneDoe</p>
      <p><strong>Email:</strong> jane.doe@example.com</p>
      <p><strong>Bio:</strong> Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
    </div>
  </div>
</div>

<!-- New Post Button -->
<div id="newPostModal" class="modal">
  <div class="modal-content">
      <span id="closeModal" class="close">&times;</span>
      <h2>Create New Post</h2>
      <form id="newPostForm">
          <label for="postTitle">Title</label>
          <input type="text" id="postTitle" placeholder="Enter title" required>

          <label for="postDescription">Description</label>
          <textarea id="postDescription" placeholder="Enter description" required></textarea>

          <label for="postImage">Upload Image</label>
          <input type="file" id="postImage" accept="image/*">

          <button type="submit" id="submitPostBtn">Post</button>
      </form>
  </div>
</div>
<button id="newPostBtn" class="new-post-btn">New Post</button>


  <!-- Bookmarks Pop-Up Modal -->
<div id="bookmarksModal" class="modal">
  <div class="modal-content">
      <span id="closeBookmarksModal" class="close">&times;</span>
      <h2>Bookmarks</h2>
      <p>Your bookmarked items will appear here.</p>
      <!-- You can add a list of bookmarks or any other content here -->
  </div>
</div>

<!-- Notifications Pop-Up Modal -->
<div id="notificationsModal" class="modal">
<div class="modal-content">
  <span id="closeNotificationsModal" class="close">&times;</span>
  <h2>Notifications</h2>
  <p>Your notifications will appear here.</p>
  <!-- You can add a list of notifications or any other content here -->
</div>
</div>

<!-- Include the modal.js file -->
<script src="../static/modal.js"></script>

<script>
  // Function to redirect to about.html with the image URL as a query parameter
  function goToAboutPage(imageUrl) {
      window.location.href = `about.html?image=${encodeURIComponent(imageUrl)}`;
  }
// Function to open the login modal
function openLoginModal() {
      document.getElementById('loginModal').style.display = 'flex';
  }

  // Function to close the login modal
  function closeLoginModal() {
      document.getElementById('loginModal').style.display = 'none';
  }

  // Function to open the registration modal
  function openRegistrationModal() {
      closeLoginModal(); // Close the login modal
      document.getElementById('registrationModal').style.display = 'flex';
  }

  // Function to close the registration modal
  function closeRegistrationModal() {
      document.getElementById('registrationModal').style.display = 'none';
  }

  // Attach event listener to the login button
  document.getElementById('loginBtn').addEventListener('click', openLoginModal);

  // Handle login form submission
  document.getElementById('loginForm').addEventListener('submit', function(event) {
      event.preventDefault();
      // Add your login logic here
      alert('Login functionality to be implemented.');
  });

  // Handle registration form submission
  document.getElementById('registrationForm').addEventListener('submit', function(event) {
      event.preventDefault();

      // Get form values
      const username = document.getElementById('regUsername').value.trim();
      const email = document.getElementById('regEmail').value.trim();
      const password = document.getElementById('regPassword').value.trim();
      const confirmPassword = document.getElementById('regConfirmPassword').value.trim();

      // Validation
      if (!username || !email || !password || !confirmPassword) {
          alert('All fields are required.');
          return;
      }

      if (password !== confirmPassword) {
          alert('Passwords do not match.');
          return;
      }

      if (password.length < 6) {
          alert('Password must be at least 6 characters long.');
          return;
      }

      // Simulate successful registration
      alert('Registration successful! Redirecting to login...');

      // Close the registration modal
      closeRegistrationModal();

      // Open the login modal
      openLoginModal();
  });

  // Close modals when clicking outside the modal content
  window.addEventListener('click', function(event) {
      if (event.target === document.getElementById('loginModal')) {
          closeLoginModal();
      }
      if (event.target === document.getElementById('registrationModal')) {
          closeRegistrationModal();
      }
  });
  // Handle registration form submission
document.getElementById('registrationForm').addEventListener('submit', function(event) {
    event.preventDefault();

    // Get form values
    const username = document.getElementById('regUsername').value.trim();
    const email = document.getElementById('regEmail').value.trim();
    const password = document.getElementById('regPassword').value.trim();
    const confirmPassword = document.getElementById('regConfirmPassword').value.trim();

    // Clear previous feedback
    const feedback = document.getElementById('registrationFeedback');
    feedback.textContent = '';

    // Validation
    if (!username || !email || !password || !confirmPassword) {
        feedback.textContent = 'All fields are required.';
        return;
    }

    if (password !== confirmPassword) {
        feedback.textContent = 'Passwords do not match.';
        return;
    }

    if (password.length < 6) {
        feedback.textContent = 'Password must be at least 6 characters long.';
        return;
    }

    // Simulate successful registration
    feedback.textContent = 'Registration successful! Redirecting to login...';
    feedback.style.color = 'green';

    // Close the registration modal after 2 seconds
    setTimeout(() => {
        closeRegistrationModal();
        openLoginModal();
    }, 2000);
});
// Handle login form submission
document.getElementById('loginForm').addEventListener('submit', function(event) {
    event.preventDefault();

    // Get form values
    const username = document.getElementById('username').value.trim();
    const password = document.getElementById('password').value.trim();

    // Clear previous feedback
    const feedback = document.getElementById('loginFeedback');
    feedback.textContent = '';

    // Validation
    if (!username || !password) {
        feedback.textContent = 'Username and password are required.';
        return;
    }

    if (password.length < 6) {
        feedback.textContent = 'Password must be at least 6 characters long.';
        return;
    }

    // Simulate successful login
    feedback.textContent = 'Login successful!';
    feedback.style.color = 'green';

    // Close the login modal after 2 seconds
    setTimeout(() => {
        closeLoginModal();
    }, 2000);
});
// Store registered users in localStorage
let registeredUsers = JSON.parse(localStorage.getItem('registeredUsers')) || [];

// Function to open the login modal
function openLoginModal() {
    document.getElementById('loginModal').style.display = 'flex';
}

// Function to close the login modal
function closeLoginModal() {
    document.getElementById('loginModal').style.display = 'none';
}

// Function to open the registration modal
function openRegistrationModal() {
    closeLoginModal(); // Close the login modal
    document.getElementById('registrationModal').style.display = 'flex';
}

// Function to close the registration modal
function closeRegistrationModal() {
    document.getElementById('registrationModal').style.display = 'none';
}

// Attach event listener to the login button
document.getElementById('loginBtn').addEventListener('click', openLoginModal);

// Handle login form submission
document.getElementById('loginForm').addEventListener('submit', function(event) {
    event.preventDefault();

    // Get form values
    const username = document.getElementById('username').value.trim();
    const password = document.getElementById('password').value.trim();

    // Clear previous feedback
    const feedback = document.getElementById('loginFeedback');
    feedback.textContent = '';

    // Validation
    if (!username || !password) {
        feedback.textContent = 'Username and password are required.';
        return;
    }

    if (password.length < 6) {
        feedback.textContent = 'Password must be at least 6 characters long.';
        return;
    }

    // Check if the user is registered
    const user = registeredUsers.find(user => user.username === username && user.password === password);

    if (user) {
        // Successful login
        feedback.textContent = 'Login successful!';
        feedback.style.color = 'green';

        // Close the login modal after 2 seconds
        setTimeout(() => {
            closeLoginModal();
        }, 2000);
    } else {
        // Failed login
        feedback.textContent = 'Invalid username or password. Please register first.';
        feedback.style.color = 'red';
    }
});

// Handle registration form submission
document.getElementById('registrationForm').addEventListener('submit', function(event) {
    event.preventDefault();

    // Get form values
    const username = document.getElementById('regUsername').value.trim();
    const email = document.getElementById('regEmail').value.trim();
    const password = document.getElementById('regPassword').value.trim();
    const confirmPassword = document.getElementById('regConfirmPassword').value.trim();

    // Clear previous feedback
    const feedback = document.getElementById('registrationFeedback');
    feedback.textContent = '';

    // Validation
    if (!username || !email || !password || !confirmPassword) {
        feedback.textContent = 'All fields are required.';
        return;
    }

    if (password !== confirmPassword) {
        feedback.textContent = 'Passwords do not match.';
        return;
    }

    if (password.length < 6) {
        feedback.textContent = 'Password must be at least 6 characters long.';
        return;
    }

    // Check if the username is already registered
    const userExists = registeredUsers.some(user => user.username === username);

    if (userExists) {
        feedback.textContent = 'Username already exists. Please choose a different username.';
        return;
    }

    // Add the new user to registeredUsers
    registeredUsers.push({ username, email, password });
    localStorage.setItem('registeredUsers', JSON.stringify(registeredUsers));

    // Simulate successful registration
    feedback.textContent = 'Registration successful! Redirecting to login...';
    feedback.style.color = 'green';

    // Close the registration modal after 2 seconds
    setTimeout(() => {
        closeRegistrationModal();
        openLoginModal();
    }, 2000);
});  

// Initialize the map
let map = L.map('map').setView([45.7489, 21.2087], 13); // Timisoara coordinates

// Add a tile layer (you can use OpenStreetMap or other tile providers)
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
}).addTo(map);

// Define the five locations corresponding to the posts
let locations = [
    { name: "Jane Doe", coords: [45.7489, 21.2087], description: "Beautiful view from the mountains!" },
    { name: "John Smith", coords: [45.7557, 21.2297], description: "Exploring the city streets today. ðŸŒ†" },
    { name: "Alice Johnson", coords: [45.7600, 21.2200], description: "Sunset at the beach. ðŸŒ…" },
    { name: "Bob Brown", coords: [45.7400, 21.2000], description: "Hiking through the forest. ðŸŒ²" },
    { name: "Emily Davis", coords: [45.7500, 21.2100], description: "Morning coffee and a good book. â˜•ðŸ“š" }
];

// Add markers for each location
locations.forEach(location => {
    L.marker(location.coords)
        .addTo(map)
        .bindPopup(`<b>${location.name}</b><br>${location.description}`);
});

</script>

<script src="../static/index.js"></script>
</body>
</html>